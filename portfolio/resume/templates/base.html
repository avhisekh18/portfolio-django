{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Portfolio{% endblock %}</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Your CSS (cache-busted once) -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}?v=11" />
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="{% url 'home' %}">Avhisekh</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div id="mainNav" class="collapse navbar-collapse">
       
       <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="{% url 'home' %}#home">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'about' %}#about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'skills' %}#skills">Skills</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'projects' %}#projects">Projects</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}#contact">Contact</a></li>

              <!-- Download CV -->
            <li class="nav-item ms-lg-2">
              <a class="nav-link" href="{% static 'cv/Avhisekh-CV.pdf' %}" download>
               <i class="bi bi-download me-1"></i>CV
              </a>
            </li>

              <!-- Theme toggle -->
             <li class="nav-item ms-lg-2">
               <button id="themeToggle" class="btn theme-toggle-btn" type="button" aria-label="Toggle color theme">
                <i class="bi bi-moon"></i>
               </button>
             </li>
        </ul>

      </div>
    </div>
  </nav>

  {% block content %}{% endblock %}

  <!-- Footer -->
  <footer class="footer mt-5 py-4">
    <div class="container text-center">
      <p class="mb-1">&copy; 2025 Avhisekh Dhungana. All rights reserved.</p>
      <div class="social-links mt-2">
        <a href="https://github.com/avhisekh18" target="_blank" class="mx-2" aria-label="GitHub">
          <i class="bi bi-github"></i>
        </a>
        <a href="https://www.linkedin.com/in/avhisekh-dhungana-1b6727258/" target="_blank" class="mx-2" aria-label="LinkedIn">
          <i class="bi bi-linkedin"></i>
        </a>
        <a href="mailto:avhisekhdhungana@gmail.com" class="mx-2" aria-label="Email">
          <i class="bi bi-envelope-fill"></i>
        </a>
      </div>
    </div>
  </footer>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Theme toggle (moon/sun) -->
  <script>
  (function () {
    const KEY = 'theme'; // 'light' or 'dark'
    const root = document.documentElement;
    const btn  = document.getElementById('themeToggle');
    const media = window.matchMedia('(prefers-color-scheme: dark)');

    function isDark(){
      const saved = localStorage.getItem(KEY);
      if (saved) return saved === 'dark';
      return media.matches;
    }
    function paintIcon(){
      if (!btn) return;
      btn.innerHTML = isDark()
        ? '<i class="bi bi-sun"></i>'
        : '<i class="bi bi-moon"></i>';
      btn.setAttribute('aria-label', isDark() ? 'Switch to light mode' : 'Switch to dark mode');
    }
    function apply(mode){
      if (mode === 'dark') root.setAttribute('data-theme','dark');
      else root.removeAttribute('data-theme'); // light
      localStorage.setItem(KEY, mode);
      paintIcon();
    }

    // Init
    apply(isDark() ? 'dark' : 'light');

    // Toggle
    btn && btn.addEventListener('click', () => {
      apply(isDark() ? 'light' : 'dark');
    });

    // If following system, update icon on system change
    media.addEventListener('change', () => {
      if (!localStorage.getItem(KEY)) apply(media.matches ? 'dark' : 'light');
    });
  })();
  </script>
</body>
</html>
